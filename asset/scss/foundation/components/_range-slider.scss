//
// @mixins
//

@mixin range-slider-bar-base($vertical: false) {
  display: block;
  position: relative;
  width: $range-slider-bar-width;
  @if $lte8 {
    height: $range-slider-bar-height-lte8;
  }
  height: $range-slider-bar-height;
  border: $range-slider-bar-border-width $range-slider-bar-border-style $range-slider-bar-border-color;
  margin: rem-calc(20 0);
  @if $vertical == true {
    display: inline-block;
    @if $lte8 {
      width: $range-slider-vertical-bar-width-lte8;
      height: $range-slider-vertical-bar-height-lte8;
    }
    width: $range-slider-vertical-bar-width;
    height: $range-slider-vertical-bar-height;
  }
}
@mixin range-slider-bar-style(
  $bg: true,
  $radius:false) {
    @if $bg == true { background: $range-slider-bar-bg-color; }
    @if $radius == true { @include radius($range-slider-radius); }
  }

@mixin range-slider-bar(
  $bg: $range-slider-bar-bg-color, 
  $radius:false) {
  @include range-slider-bar-base;
  @include range-slider-bar-style;
}

@mixin range-slider-handle-base() {
  display: inline-block;
  position: relative;
  @if $lte8 {
    margin-top: $range-slider-handle-margin-top-lte8;
    width: $range-slider-handle-width-lte8;
    height: $range-slider-handle-height-lte8;
  }
  margin-top: $range-slider-handle-margin-top;
  width: $range-slider-handle-width;
  height: $range-slider-handle-height;
  border: $range-slider-handle-border-width $range-slider-handle-border-style $range-slider-handle-border-color;
  cursor: $range-slider-handle-cursor;
}
@mixin range-slider-handle-style(
  $bg: true,
  $radius: false) {
  @if $bg == true { background: $range-slider-handle-bg-color; }
  @if $radius == true { @include radius($range-slider-radius); }
  &:hover {
    background: $range-slider-handle-bg-hover-color;
  }
}
@mixin range-slider-handle() {
  @include range-slider-handle-base;
  @include range-slider-handle-style;
}

// CSS Generation
@include exports("range-slider-bar") {
  @if $include-html-range-slider-classes {
    .range-slider {
      @include range-slider-bar-base;
      @include range-slider-bar-style($bg:true, $radius:false);
      &.vertical-range {
        @include range-slider-bar-base($vertical: true);
        .range-slider-handle {
          margin-top: 0;
          @if $lte8 {
            margin-#{$default-float}: -($range-slider-handle-width-lte8 / 4);
            bottom: -($range-slider-vertical-bar-height-lte8 - $range-slider-handle-width-lte8);
          }
          margin-#{$default-float}: -($range-slider-handle-width / 4);
          position: absolute;
          bottom: -($range-slider-vertical-bar-height - $range-slider-handle-width);
        }
        .range-slider-active-segment {
          @if $lte8 {
            width: $range-slider-bar-height-lte8 - 2px;
          }
          width: $range-slider-bar-height - rem-calc((strip-unit($range-slider-bar-border-width) * 2));
          height: auto;
          bottom: 0;
        }
      }
      &.radius {
        @include range-slider-bar-style($radius:true);
        .range-slider-handle { @include range-slider-handle-style($radius: true); }
      }
    }
    .range-slider-active-segment {
      display: inline-block;
      position: absolute;
      @if $lte8 {
        height: $range-slider-bar-height-lte8 - 2px;
      }
      height: $range-slider-bar-height - rem-calc((strip-unit($range-slider-bar-border-width) * 2));
      background: scale-color($secondary-color, $lightness: -1%);
      ~ .range-slider-handle { 
        @if $lte8 {
          margin-#{$default-float}: -($range-slider-handle-width-lte8 / 4); 
        }
        margin-#{$default-float}: -($range-slider-handle-width / 4); 
      }
    }
    .range-slider-handle {
      @include range-slider-handle-base;
      @include range-slider-handle-style($bg:true, $radius: false);
    }
  }
}
